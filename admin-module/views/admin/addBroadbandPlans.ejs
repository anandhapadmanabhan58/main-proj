<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  <meta name="copyright" content="MACode ID, https://macodeid.com/" />

  <title>JARVISnet</title>

  <link rel="stylesheet" href="css/maicons.css" />

  <link rel="stylesheet" href="css/bootstrap.css" />

  <link rel="stylesheet" href="vendor/animate/animate.css" />

  <link rel="stylesheet" href="css/theme.css" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    .mb-3 {
      padding-top: 5px;
      padding-bottom: 5px;
    }
  </style>

</head>

<body>
  <!-- Back to top button -->
  <div class="back-to-top"></div>
  <%- include('../partials/header.ejs') -%>
    <div class="partOne" style="margin:auto; padding-top: 10px; margin-left: 78vh; padding-bottom: 10px;">
      <h1>Add Broadband Plans</h1>
    </div>

    <div class="container"
      style="background-color: rgb(233, 243, 233); border-radius: 10px; padding-bottom:20px; margin-bottom: 10px;">
      <form id="addBroadbandForm">
        <div class="mb-3">
          <label class="form-label">Plan Name</label>
          <input type="text" class="form-control" id="BplanName" name="BplanName" >
          <div class="mb-3">
            <label class="form-label">Service Provider</label>
            <input type="text" class="form-control" id="BserviceProvider" name="BserviceProvider">
          </div>
          <div class="mb-3">
            <label class="form-label">Modem</label>
            <input type="text" class="form-control" id="BsetTopBox" name="BsetTopBox">
          </div>
          <div class="mb-3">
            <label class="form-label">Price</label>
            <input type="text" class="form-control" id="Bprice" name="Bprice">
          </div>
          <div class="mb-3">
            <label class="form-label">Plan Description</label>
            <input type="text" class="form-control" id="BplanDescription" name="BplanDescription">
          </div>
          <div class="mb-3">
            <label class="form-label">Plan Type</label>
            <input type="text" class="form-control" id="BplanType" name="BplanType">
            </div>
          <div class="mb-3" style="margin-left: 590px; padding-top:5px; padding-bottom:15px; margin-bottom:15px;">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
      </form>
    </div>
  </div>
    <%- include('../partials/footer.ejs') -%>

      <script src="js/jquery-3.5.1.min.js"></script>

      <script src="js/bootstrap.bundle.min.js"></script>

      <script src="js/google-maps.js"></script>

      <script src="vendor/wow/wow.min.js"></script>

      <script src="js/theme.js"></script>

      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
        <script>
         document
            .querySelector('#addBroadbandForm')
            .addEventListener('submit', addBroadband);
    
          function addBroadband(e) {
            e.preventDefault();
            const form = document.querySelector('#addBroadbandForm');
    
            let formBody = {};
    
            const formData = new FormData(form);
    
            //console.log(formData);
    
            formData.forEach((val, key) => {
              formBody[key] = val;
            });
    
            axios
              .post('/api/v1/addBroadbandPlan', formBody)
              .then((res) => {
            if (res.status == 201){
              alert('cable plan added');
              window.location = "/";
            }
            else if(res.status==200)
            {
              alert('add a valid provider');
              window.location = "/"; 
            }

          })
          .catch((err) => {
            console.log(err);
          });
          }
        </script>
</body>

</html>